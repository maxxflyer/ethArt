"use strict";function _typeof(e){return e&&typeof Symbol!="undefined"&&e.constructor===Symbol?"symbol":typeof e}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,s){try{var o=t[i](s),u=o.value}catch(a){n(a);return}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}return r("next")})}}!window.preloadedScripts && (window.preloadedScripts=[]);Array.prototype.push.apply(window.preloadedScripts,['spa/balance/controller.jsx','spa/balance/style.min.css','spa/balance/view.jsx','spa/deploy/controller.jsx','spa/deploy/donation.jsx','spa/deploy/nftCover.jsx','spa/deploy/nftData.jsx','spa/deploy/nftFile.jsx','spa/deploy/nftOwner.jsx','spa/deploy/nftType.jsx','spa/deploy/style.min.css','spa/deploy/view.jsx','spa/explore/controller.jsx','spa/explore/style.min.css','spa/explore/view.jsx','spa/index/controller.jsx','spa/index/style.min.css','spa/index/view.jsx','spa/loader.jsx','spa/loaderipfs.jsx']);var BalanceController=function(t){var n=this;n.view=t,n.renderItems=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(window.ethArtToken){r.next=2;break}return r.abrupt("return",setTimeout(function(){return n.renderItems()}));case 2:n.view.setState({items:null}),e={},n.renderItemsOfToken(window.ethArtToken,e),n.renderItemsOfToken(window.standaloneToken,e);case 6:case"end":return r.stop()}},r,this)}));return t}(),n.renderItemsOfToken=function(){function t(t,n){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e,t){var i,s,o,u,a,f,l;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return i=e.options.address,c.next=3,window.blockchainCall(e.methods.symbol);case 3:s=c.sent;if(window.walletAddress){c.next=8;break}c.t0=0,c.next=13;break;case 8:return c.t1=parseInt,c.next=11,window.blockchainCall(e.methods.balanceOf,window.walletAddress);case 11:c.t2=c.sent,c.t0=(0,c.t1)(c.t2);case 13:o=c.t0,u=0;case 15:if(!(u<o)){c.next=40;break}return c.next=18,window.blockchainCall(e.methods.tokenOfOwnerByIndex,window.walletAddress,u);case 18:return a=c.sent,c.t3=a+"_"+i,c.t4=a,c.next=23,window.blockchainCall(e.methods.tokenURI,a);case 23:return c.t5=c.sent,c.t6=window.context.openSeaURL+i+"/"+a,c.t7=window.getNetworkElement("etherscanURL")+"token/"+i+"?a="+a,c.t8=i,c.t9=s,f=t[a+"_"+i]={key:c.t3,tokenId:c.t4,metadataLink:c.t5,openSeaLink:c.t6,etherscanLink:c.t7,tokenAddress:c.t8,ticker:c.t9,loading:!0},n.view.setState({items:t}),c.next=32,window.AJAXRequest(f.metadataLink.split("ipfs://").join("//gateway.ipfs.io/"));case 32:l=c.sent,Object.keys(l).forEach(function(e){return f[e]=l[e]}),Object.keys(f).forEach(function(e){try{f[e]=f[e].split("ipfs://").join("//gateway.ipfs.io/")}catch(t){}}),delete f.loading,n.view.setState({items:t});case 37:u++,c.next=15;break;case 40:case"end":return c.stop()}},r,this)}));return t}()};var Balance=React.createClass({displayName:"Balance",requiredScripts:["spa/loader.jsx"],componentDidMount:function(){this.controller.renderItems()},getDefaultSubscriptions:function(){return{"ethereum/ping":this.controller.renderItems,"deploy/done":this.controller.renderItems}},renderItem:function(t){return React.createElement("section",{key:t.key,className:"BALANCE-ITEM"},React.createElement("figure",{style:{backgroundColor:t.background_color}},t.loading&&React.createElement(Loader,null),!t.loading&&React.createElement("img",{src:t.name?t.image||"/assets/img/missingno.png":"/assets/img/missingno.png"})),React.createElement("section",{className:"ASSET-INFO"},React.createElement("p",null,t.ticker," #",t.tokenId," - ",t.loading?"Loading...":t.name?window.shortenWord(t.name):"MISSINGNO.")),React.createElement("section",{className:"ASSET-ACTION"},React.createElement("a",{className:"OS",target:"_blank",href:t.etherscanLink},"Etherscan"),React.createElement("a",{className:"OS",target:"_blank",href:t.openSeaLink},"OpenSea")))},render:function(){return React.createElement("section",{className:"BALANCE-ITEMS"},this.state&&this.state.items&&Object.values(this.state.items).map(this.renderItem),React.createElement("section",{className:"BALANCE-LOAD"},React.createElement("a",{className:"BALANCE-LOAD-FX",href:"javascript:;",onClick:this.controller.renderItems},"Refresh ↻")))}});var DeployController=function(t){var n=this;n.view=t,n.deploy=function(){function t(t,n){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e,t){var i,s;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,n.preConditionCheck(e);case 2:return o.next=4,window.uploadToIPFS(e.file[0]);case 4:return o.t0=o.sent.split("ipfs://").join("https://ipfs.io/"),o.next=7,window.uploadToIPFS(e.cover[0]);case 7:return o.t1=o.sent.split("ipfs://").join("https://ipfs.io/"),o.t2=e.title,o.t3=e.description,o.t4=e.background,i={external_url:o.t0,image:o.t1,name:o.t2,description:o.t3,background_color:o.t4},n.view.emit("loader/show"),o.next=15,window.uploadToIPFS(i);case 15:s=o.sent,n.view.emit("loader/propagate",[s,i.external_url,i.image],_asyncToGenerator(regeneratorRuntime.mark(function u(){var r,o,a,f,l,c,h,p,d;return regeneratorRuntime.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:r=window.web3.utils.sha3(JSON.stringify(i)),o=n.view.state.rootId||0,a=window.web3.utils.toWei(n.getDonation(e),"ether"),a=parseInt(a)===0?undefined:a,f=e.onchain===!0;if(!f){v.next=11;break}return v.next=8,n.readChunks(e.file[0],e.dfo);case 8:v.t0=v.sent,v.next=12;break;case 11:v.t0=[""];case 12:return l=v.t0,v.next=15,window.web3.eth.getBlockNumber();case 15:c=v.sent,v.prev=16,v.t1=regeneratorRuntime.keys(l);case 18:if((v.t2=v.t1()).done){v.next=44;break}h=v.t2.value,h=parseInt(h),n.view.emit("loader/transaction",h+1,f?l.length:1);if(!e.dfo){v.next=33;break}return v.next=25,window.ethArt.mint(h==0?a:undefined,h==0?s:"",h==0?r:"0x",f?l[h]:"0x",!f||h===l.length-1,o);case 25:p=v.sent;if(o){v.next=31;break}return v.next=29,window.ethArt.getPastLogs({event:"Minted(address_indexed,address,uint256,uint256)",fromBlock:c});case 29:d=v.sent,o=parseInt(d[0].data[1]);case 31:v.next=39;break;case 33:return v.next=35,window.blockchainCall(h==0?a:"",window.standaloneToken.methods.mint,f?l[h]:"0x",h==0?s:"",o,!f||h===l.length-1,"0x");case 35:if(o){v.next=39;break}return v.next=38,window.blockchainCall(window.standaloneToken.methods.totalSupply);case 38:o=v.sent;case 39:a=undefined;if(f){v.next=42;break}return v.abrupt("break",44);case 42:v.next=18;break;case 44:v.next=52;break;case 46:v.prev=46,v.t3=v["catch"](16);if(t){v.next=51;break}throw n.view.emit("loader/hide"),v.t3;case 51:return v.abrupt("return",t(v.t3));case 52:n.view.emit("loader/hide"),n.view.emit("deploy/done");case 54:case"end":return v.stop()}},u,this,[[16,46]])})));case 17:case"end":return o.stop()}},r,this)}));return t}(),n.getDonation=function(t){var n=Object.keys(t);for(var r=n,i=Array.isArray(r),s=0,r=i?r:r[Symbol.iterator]();;){var o;if(i){if(s>=r.length)break;o=r[s++]}else{s=r.next();if(s.done)break;o=s.value}var u=o;if(u.indexOf("donation_")===-1)continue;if(t[u])return u.substring(u.indexOf("_")+1)}return 0},n.readChunks=function(t,r){return new Promise(function(e,i){var s;try{s=t.name.substring(t.name.lastIndexOf(".")+1).toLowerCase()}catch(o){}if(!s)return i("Cannot retrieve file extension");var u=new FileReader;u.addEventListener("load",_asyncToGenerator(regeneratorRuntime.mark(function a(){var o,f;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:o=u.result;if(o!==""){l.next=3;break}return l.abrupt("return",i("Cannot read "+t.name+". Maybe it's too large"));case 3:try{f=o.substring(5,o.indexOf(";"))}catch(c){}try{f=f||window.context.supportedFileExtensions[s]}catch(c){}if(f){l.next=7;break}return l.abrupt("return",i("Unsupported file extension (."+s+")"));case 7:return o="data:"+f+o.substring(o.indexOf(";")),l.t0=e,l.next=11,window.split(o,r?window.context.singleTokenLength:window.context.singleTokenLengthStandalone,function(e){n.view.emit("loader/chunks",e)});case 11:l.t1=l.sent,(0,l.t0)(l.t1);case 13:case"end":return l.stop()}},a,this)})),!1),u.readAsDataURL(t)})},n.preConditionCheck=function(){function t(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function n(e){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:t=[],!e.title&&t.push("Title is mandatory"),!e.description&&t.push("Description is mandatory"),!e.background&&t.push("Background color is mandatory"),(!e.file||e.file.length===0)&&t.push("Data is mandatory"),(!e.cover||e.cover.length===0)&&t.push("Cover is mandatory"),!e.regular&&!e.onchain&&t.push("You must choose the NFT Type"),!e.dfo&&!e.standalone&&t.push("Please select the Ownership model");if(!(t.length>0)){r.next=10;break}throw t.join("\n");case 10:case"end":return r.stop()}},n,this)}));return t}()};var Donation=React.createClass({displayName:"Donation",validate:function(){var t=window.getData(this.domRoot);for(var n=Object.values(t),r=Array.isArray(n),i=0,n=r?n:n[Symbol.iterator]();;){var s;if(r){if(i>=n.length)break;s=n[i++]}else{i=n.next();if(i.done)break;s=i.value}var o=s;if(o)return}throw"A donation option must be chosen"},onClick:function(t){t&&t.preventDefault&&t.preventDefault()&&t.stopPropagation&&t.stopPropagation(),$($(t.currentTarget).parent()).children("input").click()},render:function(){return React.createElement("section",null,React.createElement("section",{className:"DEPLOY-INFO"},React.createElement("label",null,"Donation:"),React.createElement("section",{className:"DEPLOY-DONATIONS"},React.createElement("section",{className:"DEPLOY-DONATION"},React.createElement("input",{name:"donation",type:"radio",id:"donation_1"}),React.createElement("aside",{onClick:this.onClick},"👻 1 ETH")),React.createElement("section",{className:"DEPLOY-DONATION"},React.createElement("input",{name:"donation",type:"radio",id:"donation_0.1"}),React.createElement("aside",{onClick:this.onClick},"😍 0.1 ETH")),React.createElement("section",{className:"DEPLOY-DONATION"},React.createElement("input",{name:"donation",type:"radio",id:"donation_0.01"}),React.createElement("aside",{onClick:this.onClick},"😎 0.01 ETH")),React.createElement("section",{className:"DEPLOY-DONATION"},React.createElement("input",{name:"donation",type:"radio",id:"donation_0.005"}),React.createElement("aside",{onClick:this.onClick},"🙂 0.005 ETH")),React.createElement("section",{className:"DEPLOY-DONATION"},React.createElement("input",{name:"donation",type:"radio",id:"donation_0.001"}),React.createElement("aside",{onClick:this.onClick},"🙃 0.001 ETH")),React.createElement("section",{className:"DEPLOY-DONATION"},React.createElement("input",{name:"donation",type:"radio",id:"donation_0"}),React.createElement("aside",{onClick:this.onClick},"🙁 Nope!"))),React.createElement("p",null,React.createElement("b",null,"No fees here!")," You only have to pay the Ethereum GAS. if you want to 🙏 us, you can donate to ",React.createElement("a",{href:"https://dfohub.com",target:"_Blank"},"DFOhub")," for more R&D and fancy updates")))}});var NftCover=React.createClass({displayName:"NftCover",requiredScripts:["spa/loader.jsx"],onChange:function(t){t&&t.preventDefault&&t.preventDefault()&&t.stopPropagation&&t.stopPropagation();if(t.currentTarget.files.length===0)return;var n=t.currentTarget,r=this;r.setState({loading:!0},function(){return r.emit("deploy/pause")}),window.checkCoverSize(n.files[0]).then(function(e){r.setState({loading:!1},function(){return r.emit("deploy/resume")})})},render:function(){return React.createElement("section",null,React.createElement("section",{className:"DEPLOY-INFO"},React.createElement("label",{htmlFor:"cover"},"Cover:"),React.createElement("input",{id:"cover","data-mandatory":"true",accept:".png",type:"file",onChange:this.onChange}),React.createElement("p",null,"A Preview cover for dapps and wallets."),this.state&&this.state.loading&&React.createElement(Loader,null)),React.createElement("section",{className:"DEPLOY-INFO"},React.createElement("label",{htmlFor:"background"},"Background:"),React.createElement("input",{id:"background","data-mandatory":"true",type:"color"}),React.createElement("p",null,"Background color displayed by dapps and Wallets.")))}});var NftData=React.createClass({displayName:"NftData",render:function(){return React.createElement("section",null,React.createElement("section",{className:"DEPLOY-INFO"},React.createElement("label",{htmlFor:"title"},"Title:"),React.createElement("input",{id:"title","data-mandatory":"true",type:"text"})),React.createElement("section",{className:"DEPLOY-INFO"},React.createElement("label",{htmlFor:"description"},"Description:"),React.createElement("textarea",{id:"description","data-mandatory":"true",type:"text"})))}});var NftFile=React.createClass({displayName:"NftFile",requiredScripts:["spa/loader.jsx"],onChange:function(t){t&&t.preventDefault&&t.preventDefault()&&t.stopPropagation&&t.stopPropagation();var n=t.currentTarget;if(n.files.length===0)return;var r=this;r.setState({loading:!0},function(){return r.emit("deploy/pause")});var i=new FileReader;i.addEventListener("load",_asyncToGenerator(regeneratorRuntime.mark(function s(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i.result===""&&alert("Cannot read "+n.files[0].name+". Maybe it's too large"),i.result===""&&(n.value=""),r.setState({loading:!1},function(){return r.emit("deploy/resume")});case 3:case"end":return t.stop()}},s,this)})),!1),i.readAsDataURL(n.files[0])},render:function(){return React.createElement("section",null,React.createElement("section",{className:"DEPLOY-INFO"},React.createElement("label",{htmlFor:"data"},"NFT File:"),React.createElement("input",{id:"file",onChange:this.onChange,"data-mandatory":"true",type:"file",accept:"."+Object.keys(window.context.supportedFileExtensions).join(", .")}),this.state&&this.state.loading&&React.createElement(Loader,null)))}});var NftOwner=React.createClass({displayName:"NftOwner",validate:function(){var t=window.getData(this.domRoot);if(!t.dfo&&!t.standalone)throw"Please select the Ownership model"},render:function(){return React.createElement("section",null,React.createElement("section",{className:"DEPLOY-INFO"},React.createElement("input",{id:"dfo",name:"type",type:"radio",value:"coOwned"}),React.createElement("label",{htmlFor:"dfo"},"(ARTE)Co-Ownership:"),React.createElement("p",null,"You can mint this NFT in co-ownership with the Ethart Bank, receiving 1 ARTE and becoming an owner of the bank. ",React.createElement("a",{href:"https://github.com/b-u-i-d-l/ethArt"},"more"))),React.createElement("section",{className:"DEPLOY-INFO"},React.createElement("input",{id:"standalone",name:"type",type:"radio",value:"standalone"}),React.createElement("label",{htmlFor:"standalone"},"(ETRA)Standalone:"),React.createElement("p",null,"You have the full ownership of your NFT, and cheaper ETH fees to create it, but without any participation in the Ethart Bank.")))}});var NftType=React.createClass({displayName:"NftType",validate:function(){var t=window.getData(this.domRoot);if(!t.regular&&!t.onchain)throw"You must choose the NFT Type"},render:function(){return React.createElement("section",null,React.createElement("section",{className:"DEPLOY-INFO"},React.createElement("input",{id:"regular",name:"type",type:"radio",value:"regular"}),React.createElement("label",{htmlFor:"regular"},"Regular NFT:"),React.createElement("p",null,"Commonly used Standard by storing the file via IPFS. Cheaper, but the file can be forgotten. ",React.createElement("a",{href:"https://docs.ipfs.io/concepts/how-ipfs-works/#content-addressing",target:"_Blank"},"More"))),React.createElement("section",{className:"DEPLOY-INFO"},React.createElement("input",{id:"onchain",name:"type",type:"radio",value:"onchain"}),React.createElement("label",{htmlFor:"onchain"},"Onchain NFT:"),React.createElement("p",null,"A decentralized standard by storing the file on-chain. Expensive, but the file is stored perpetually as long as the ethereum network exists.")))}});var Deploy=React.createClass({displayName:"Deploy",requiredScripts:["spa/deploy/nftData.jsx","spa/deploy/nftCover.jsx","spa/deploy/nftType.jsx","spa/deploy/nftOwner.jsx","spa/deploy/nftFile.jsx","spa/deploy/donation.jsx"],getDefaultSubscriptions:function(){return{"deploy/pause":this.pause,"deploy/resume":this.resume}},pause:function(){this.domRoot.children().find("a").addClass("disabled")},resume:function(){this.domRoot.children().find("a").removeClass("disabled")},getInitialState:function(){return{page:0}},dumpData:function(){var t=this;try{this.currentPage.validate&&this.currentPage.validate(),this.data=this.data||{"donation_0.005":!0,background:"#8f00ff"};var n=window.getData(this.currentPage.domRoot);return Object.keys(n).forEach(function(e){return t.data[e]=n[e]}),this.data}catch(r){throw alert(r.message||r),r}},deploy:function(t){t&&t.preventDefault&&t.preventDefault()&&t.stopPropagation&&t.stopPropagation();if($(t.currentTarget).hasClass("disabled"))return;this.emit("loader/show");var n=this,r=function(t){alert(t.message||t),n.emit("loader/hide")};try{this.controller.deploy(this.dumpData(),r).catch(r)}catch(t){return r(t)}},changePage:function(t,n){t&&t.preventDefault&&t.preventDefault()&&t.stopPropagation&&t.stopPropagation();if($(t.currentTarget).hasClass("disabled"))return;n>0&&this.dumpData();var r=this,i=this.state.page;i+=n,i=i<0?0:i>=this.requiredScripts.length?this.requiredScripts.length-1:i,this.setState({page:i},function(){window.setData(r.currentPage.domRoot,r.data),setTimeout(function(){return window.setData(r.currentPage.domRoot,r.data)})})},render:function(){var t=this;return React.createElement("section",{className:"DEPLOY-ITEM"},window.React.createElement(this.requiredScripts[this.state.page].split("spa/deploy/").join("").split(".jsx").join("").firstLetterToUpperCase(),{ref:function(n){return t.currentPage=n}}),React.createElement("section",{className:"DEPLOY-ACTION"},this.state.page>0&&React.createElement("a",{href:"javascript:;",onClick:function(n){return t.changePage(n,-1)},className:"deploy-btn"},"prev"),this.state.page<this.requiredScripts.length-1&&React.createElement("a",{href:"javascript:;",onClick:function(n){return t.changePage(n,1)},className:"deploy-btn"},"next"),this.state.page===this.requiredScripts.length-1&&React.createElement("a",{href:"javascript:;",onClick:this.deploy,className:"deploy-btn"},"deploy")))}});var ExploreController=function(t){var n=this;n.view=t,n.renderItems=function(){function t(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e){var t,i,s;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(window.ethArtToken){o.next=2;break}return o.abrupt("return",setTimeout(function(){return n.renderItems(e)}));case 2:return t=window[e.props.token+"Token"],o.next=5,n.renderPages(e,t);case 5:i=o.sent,s={},n.renderItemsOfToken(e,t,s,i.start,i.end);case 8:case"end":return o.stop()}},r,this)}));return t}(),n.renderItemsOfToken=function(){function t(t,n,r,i,s){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function n(e,t,r,i,s){var o,u,a,f,l,c,h,p;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return o=t.options.address,d.next=3,window.blockchainCall(t.methods.symbol);case 3:return u=d.sent,d.t0=parseInt,d.next=7,window.blockchainCall(t.methods.totalSupply);case 7:d.t1=d.sent,a=(0,d.t0)(d.t1);if(!(i>=a)){d.next=11;break}return d.abrupt("return");case 11:s=s>a+1?a+1:s,f=i;case 13:if(!(f<s)){d.next=49;break}return d.next=16,window.blockchainCall(t.methods.tokenURI,f);case 16:l=d.sent;if(l){d.next=37;break}return d.prev=18,d.next=21,window.blockchainCall(t.methods.metadata,f);case 21:c=d.sent,d.next=37;break;case 24:return d.prev=24,d.t2=d["catch"](18),d.prev=26,d.next=29,window.ethArt.getAddress(f+"_owner");case 29:h=d.sent;if(h!==window.voidEthereumAddress){d.next=32;break}return d.abrupt("continue",46);case 32:d.next=37;break;case 34:return d.prev=34,d.t3=d["catch"](26),d.abrupt("continue",46);case 37:return p=r[f+"_"+o]={key:f+"_"+o,tokenId:f,metadataLink:l,openSeaLink:window.context.openSeaURL+o+"/"+f,etherscanLink:window.getNetworkElement("etherscanURL")+"token/"+o+"?a="+f,tokenAddress:o,ticker:u,loading:!0},e.setState({items:r}),d.next=41,window.AJAXRequest(p.metadataLink.split("ipfs://").join("//gateway.ipfs.io/"));case 41:c=d.sent,Object.keys(c).forEach(function(e){return p[e]=c[e]}),Object.keys(p).forEach(function(e){try{p[e]=p[e].split("ipfs://").join("//gateway.ipfs.io/")}catch(t){}}),delete p.loading,e.setState({items:r});case 46:f++,d.next=13;break;case 49:case"end":return d.stop()}},n,this,[[18,24],[26,34]])}));return t}(),n.renderPages=function(){function t(t,n){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e,t){var i,s,o,u,a,f,l;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return i=e.searchInput.value,i=i===""?undefined:parseInt(i),e.setState({items:null}),c.t0=window,c.t1=parseInt,c.next=7,window.blockchainCall(t.methods.totalSupply);case 7:c.t2=c.sent,c.t3=(0,c.t1)(c.t2),c.t4=c.t3+1,s=c.t0.numberToString.call(c.t0,c.t4);if(!(s<=i)){c.next=13;break}return c.abrupt("return");case 13:return s=isNaN(i)?s:i+1,o=parseInt(s)-1,u=o/window.context.explorePageLimit,u=u<=0?1:u,u=n.roundUp(u),a=e.state&&e.state.page||1,e.setState({page:a,totalPages:u}),f=isNaN(i)?1:i,l=parseInt(s),isNaN(i)&&(l=a*window.context.explorePageLimit+1,l>s&&(l=s),f=a*window.context.explorePageLimit-window.context.explorePageLimit+1),c.abrupt("return",{start:f,end:l});case 24:case"end":return c.stop()}},r,this)}));return t}(),n.roundUp=function(t){var n=window.numberToString(t);if(n.indexOf(".")===-1)return t;var r=parseFloat("0"+n.substring(n.indexOf(".")));return r=r>0?1:0,parseInt(n)+r}};var Explore=React.createClass({displayName:"Explore",requiredScripts:["spa/loader.jsx"],componentDidMount:function(){this.controller.renderItems(this)},getDefaultSubscriptions:function(){var t=this;return{"ethereum/update":function(){return t.controller.renderItems(t)},"deploy/done":function(){return t.controller.renderItems(t)}}},renderItem:function(t){return React.createElement("section",{key:t.key,className:"EXPLORE-ITEM"},React.createElement("figure",null,t.loading&&React.createElement(Loader,null),!t.loading&&React.createElement("img",{src:t.name?window.makeBlockie(t.tokenId+t.tokenAddress):"assets/img/missingno.png"})),React.createElement("section",{className:"ASSET-INFO"},React.createElement("h4",null,t.ticker," #",t.tokenId," - ",t.loading?"Loading...":t.name?window.shortenWord(t.name):"MISSINGNO."),React.createElement("p",null,t.description?window.shortenWord(t.description,150):"No description")),React.createElement("section",{className:"ASSET-ACTION"},React.createElement("a",{className:"OS",href:t.etherscanLink,target:"_blank"},"Etherscan"),React.createElement("a",{className:"OS",target:"_blank",href:t.openSeaLink},"OpenSea")))},onSearch:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0),this.searchTimeout&&window.clearTimeout(this.searchTimeout);var n=this;this.searchTimeout=window.setTimeout(function(){return n.controller.renderItems(n)},500)},changePage:function(t){var n=this.state&&this.state.page||1;n+=t,n=n<=0?1:n>this.state.totalPages?this.state.totalPages:n;var r=this;this.setState({page:n},function(){return r.controller.renderItems(r)})},render:function(){var t=this,n=this;return React.createElement("section",{className:this.props.className},React.createElement("section",{className:"EXPLORE"},React.createElement("section",{className:"HUGE-BOX"},React.createElement("section",{className:"shadowPi shadowPi1"}),React.createElement("section",{className:"shadowPi shadowPi2"}),React.createElement("section",{className:"shadowPi shadowPi3"}),React.createElement("section",{className:"HUGE-MENU HUGE-MENU-Pi"},React.createElement("h3",null,"Explore ",this.props.className," NFTs ",React.createElement("a",{href:"http://erc721.org/",target:"_Blank"})),React.createElement("section",{className:"EXPLORE-ITEMS"},React.createElement("section",{className:"EXPLORE-SEARCH"},React.createElement("input",{ref:function(n){return t.searchInput=n},type:"search",onChange:this.onSearch}),React.createElement("a",{href:"javascript:;",onClick:function(){return n.controller.renderItems(n)}},"search")),this.state&&this.state.items&&Object.values(this.state.items).map(this.renderItem),(!this.searchInput||this.searchInput.value==="")&&this.state&&this.state.totalPages&&this.state.totalPages!==1&&React.createElement("section",{className:"ASSET-PAGE"},this.state&&this.state.page>1&&React.createElement("a",{href:"javascript:;",onClick:function(){return t.changePage(-1)}},"←"),React.createElement("p",null,"Page ",this.state.page," of ",this.state.totalPages),this.state&&this.state.page<this.state.totalPages&&React.createElement("a",{href:"javascript:;",onClick:function(){return t.changePage(1)}},"→")))))))}});var IndexController=function(t){var n=this;n.view=t};var Index=React.createClass({displayName:"Index",requiredModules:["spa/deploy","spa/balance","spa/explore"],requiredScripts:["spa/loaderipfs.jsx"],render:function(){var t=this;return React.createElement("section",null,React.createElement("section",{className:"HEADER"},React.createElement("h1",null,React.createElement("img",{src:"/assets/img/ethart-logo.png"}),React.createElement("span",{className:"LOGO-Y-2"},React.createElement("span",{className:"LOGO-P"},"e"),"th"),React.createElement("aspan",{className:"LOGO-Pi"},"ar"),React.createElement("span",{className:"LOGO-G"},"t")),React.createElement("section",{className:"WALLET"},!window.walletAddress&&window.ethereum&&window.ethereum.enable&&React.createElement("a",{href:"javascript:;",onClick:function(){return window.ethereum.enable().then(function(){return t.forceUpdate()}).catch(function(){})}},"Connect"),window.walletAddress&&React.createElement("a",{href:window.getNetworkElement("etherscanURL")+"address/"+window.walletAddress,target:"_blank"},window.shortenWord(window.walletAddress,7),".."),window.walletAddress&&React.createElement("figure",null,React.createElement("img",{src:window.makeBlockie(window.walletAddress)})))),React.createElement("section",{className:"MANAGE"},React.createElement("section",{className:"SMALL-BOX"},React.createElement("section",{className:"shadowP shadowP1"}),React.createElement("section",{className:"shadowP shadowP2"}),React.createElement("section",{className:"shadowP shadowP3"}),React.createElement("section",{className:"SMALL-MENU SMALL-MENU-P"},React.createElement("h3",null,"Create NFT ",React.createElement("a",{href:"http://erc721.org/",target:"_Blank"},"erc721")),React.createElement(Deploy,null))),React.createElement("section",{className:"SMALL-BOX"},React.createElement("section",{className:"shadowG shadowG1"}),React.createElement("section",{className:"shadowG shadowG2"}),React.createElement("section",{className:"shadowG shadowG3"}),React.createElement("section",{className:"SMALL-MENU SMALL-MENU-G"},React.createElement("h3",null,"Your NFTs ",React.createElement("a",{href:"http://erc721.org/",target:"_Blank"})),React.createElement(Balance,null)))),React.createElement(Explore,{className:"ARTE",token:"ethArt"}),React.createElement(Explore,{className:"ETRA",token:"standalone"}),React.createElement("footer",null,React.createElement("h4",null,"Made with ❤️ by the ",React.createElement("a",{href:"https://dfohub.com",target:"_Blank"},"DFOhub")," team for Etherean Artists, you can verify the code you're running ",React.createElement("a",{href:"https://dapp.dfohub.com/?addr=0x4A08d087817Fa803ef3E0B4E17D7856692F5d68D",target:"_Blank"},"here")," and the R&D repo ",React.createElement("a",{href:"https://github.com/b-u-i-d-l/ethArt",target:"_Blank"},"here")),React.createElement("p",{className:"DISCLAMER"},"Every on-chain file is available to everyone, be careful to don't transact personal data. Ethereum and IPFS power everything here. Whatever action you take, you have full responsibility.")),React.createElement(LoaderIPFS,null))}});var Loader=React.createClass({displayName:"Loader",render:function(){return React.createElement("div",{className:"loadingio-spinner-square-iyrjry8g9g9"},React.createElement("div",{className:"ldio-wdnt6erfulc"},React.createElement("div",null),React.createElement("div",null),React.createElement("div",null),React.createElement("div",null),React.createElement("div",null),React.createElement("div",null),React.createElement("div",null),React.createElement("div",null),React.createElement("div",null)))}});var LoaderIPFS=React.createClass({displayName:"LoaderIPFS",getDefaultSubscriptions:function(){var t=this;return{"loader/show":function(){return t.setState({propagate:!1,transaction:0,chunks:0},function(){return t.domRoot.css("display","block")})},"loader/propagate":this.propagate,"loader/hide":this.hideLoader,"loader/transaction":this.transaction,"loader/chunks":function(n){return t.setState({propagate:!1,transaction:0,chunks:n},function(){return t.domRoot.css("display","block")})}}},getInitialState:function(){return{counter:60}},propagate:function(t,n){var r=this;t&&t.forEach(function(e){return window.AJAXRequest(e.split("ipfs://").join("//gateway.ipfs.io/"))});var i=function(){if(r.state.counter===0)return r.interval&&clearInterval(r.interval),n&&n();r.setState({counter:r.state.counter-1,chunks:0})};r.interval&&clearInterval(r.interval),r.setState({counter:60,propagate:!0,transaction:0,chunks:0},function(){r.domRoot.css("display","block"),r.interval=setInterval(i,1e3)})},hideLoader:function(){this.interval&&clearInterval(this.interval),this.domRoot.css("display","none"),this.setState({propagate:!1,transaction:0,chunks:0})},transaction:function(t,n){this.interval&&clearInterval(this.interval),this.setState({transaction:t,transactions:n,propagate:!1,chunks:0})},render:function(){return React.createElement("section",{className:"UPLOADBANNER"},this.state.chunks&&React.createElement("h1",null,"Generating ",this.state.chunks," chunks..."),!this.state.chunks&&!this.state.propagate&&!this.state.transaction&&React.createElement("h1",null,"Uploading..."),!this.state.chunks&&this.state.propagate&&React.createElement("h1",null,this.state.counter),!this.state.chunks&&this.state.propagate&&React.createElement("h2",null,"Waiting for Propagation"),!this.state.chunks&&this.state.transaction&&React.createElement("h2",null,"Transaction ",this.state.transaction," ",this.state.transactions>1&&React.createElement("span",null,"of ",this.state.transactions)),React.createElement("div",{"class":"loadingio-spinner-ripple-6l4nh0xpwdg"},React.createElement("div",{"class":"ldio-2it1sjbil3o"},React.createElement("div",null),React.createElement("div",null))))}});!window.preloadedScripts && (window.preloadedScripts=[]);Array.prototype.push.apply(window.preloadedScripts,['spa/balance/controller.jsx','spa/balance/style.min.css','spa/balance/view.jsx','spa/deploy/controller.jsx','spa/deploy/donation.jsx','spa/deploy/nftCover.jsx','spa/deploy/nftData.jsx','spa/deploy/nftFile.jsx','spa/deploy/nftOwner.jsx','spa/deploy/nftType.jsx','spa/deploy/style.min.css','spa/deploy/view.jsx','spa/explore/controller.jsx','spa/explore/style.min.css','spa/explore/view.jsx','spa/index/controller.jsx','spa/index/style.min.css','spa/index/view.jsx','spa/loader.jsx','spa/loaderipfs.jsx']);